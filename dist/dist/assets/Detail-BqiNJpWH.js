import{_ as R,r as v,p as j,J,C as L,D as O,c as T,d as s,e as n,f as d,g as f,x as z,t as i,E as A,u as q,o as m,y as b,V as F,j as p,P as G,aD as Q}from"./index-Bqka696Z.js";import{g as W}from"./cardholder-BMYgKJ4n.js";import X from"./EditCardholder-DCmC0anT.js";const Y={class:"cardholder-detail-wrapper","element-loading-text":"加载中..."},Z={class:"header-bar"},oo={class:"top-info-row"},so={class:"name-row"},lo={class:"main-name"},eo={class:"detail-content"},to={class:"info-section"},io={class:"section-icon"},ao={class:"info-table"},no={class:"info-row"},ro={class:"info-value"},uo={class:"info-value"},co={class:"info-row"},vo={class:"info-value"},fo={class:"info-value"},_o={class:"info-section"},mo={class:"section-icon"},bo={class:"info-table"},po={class:"info-row"},Co={class:"info-value"},yo={class:"info-value"},go={class:"info-row"},wo={class:"info-value"},Do={class:"info-value"},ko={class:"info-row"},xo={class:"info-value"},ho={__name:"Detail",setup(Eo){const C=J(),I=q(),e=v(null),_=v(!1),u=v(!1),y=v(null);async function g(a){var o,r;try{_.value=!0,console.log("开始获取用卡人详情，cardholderId:",a);const t=await W({pageSize:10,pageIndex:1,cardholderId:a});console.log("接口返回数据:",t),console.log("data.data:",(o=t.data)==null?void 0:o.data);const c=((r=t.data)==null?void 0:r.data)||[];if(console.log("解析后的列表数据:",c),t.code===200&&c.length>0){const l=c[0];console.log("获取到的用卡人数据:",l),e.value={id:l.cardholderId,name:`${l.lastName||""}${l.firstName||""}`,status:l.status==="normal"?"成功":"失败",country:l.nationalityCountryCode==="HK"?"中国香港":l.nationalityCountryCode==="CN"?"中国":l.nationalityCountryCode==="US"?"美国":l.nationalityCountryCode||"-",email:l.email||"-",birthday:l.dateOfBirth||"-",phone:l.mobile?`+${l.mobilePrefix} ${l.mobile}`:"-",billCountry:l.residentialCountryCode==="HK"?"中国香港":l.residentialCountryCode==="CN"?"中国":l.residentialCountryCode==="US"?"美国":l.residentialCountryCode||"-",billCity:l.residentialCity||"-",billProvince:l.residentialState||"-",billAddress:l.residentialAddress||"-",billPostcode:l.residentialPostalCode||"-",originalData:l},console.log("组装后的详情数据:",e.value)}else console.error("获取用卡人详情失败，返回数据异常:",t),A.error("获取用卡人详情失败")}catch(t){console.error("获取用卡人详情失败，错误信息:",t),A.error("获取用卡人详情失败")}finally{_.value=!1}}j(async()=>{const a=C.params.id;a&&await g(a)});function U(){I.back()}function H(){var a;y.value=(a=e.value)==null?void 0:a.originalData,u.value=!0}function K(){u.value=!1,g(C.params.id)}return(a,o)=>{var w,D,k,x,h,E,N,P,S,V,B;const r=f("el-icon"),t=f("el-tag"),c=f("el-button"),l=f("el-dialog"),M=O("loading");return L((m(),T("div",Y,[s("div",Z,[n(r,{class:"back-icon-only",onClick:U},{default:d(()=>[n(b(F))]),_:1}),o[2]||(o[2]=s("span",{class:"header-title"},"用卡人详情",-1))]),s("div",oo,[s("div",null,[o[5]||(o[5]=s("div",{class:"label"},"用卡人姓名",-1)),s("div",so,[s("span",lo,i((w=e.value)==null?void 0:w.name),1),((D=e.value)==null?void 0:D.status)==="成功"?(m(),z(t,{key:0,type:"success",size:"small"},{default:d(()=>o[3]||(o[3]=[p("成功")])),_:1})):(m(),z(t,{key:1,type:"danger",size:"small"},{default:d(()=>o[4]||(o[4]=[p("失败")])),_:1}))])]),n(c,{class:"edit-btn",onClick:H},{default:d(()=>o[6]||(o[6]=[p("编辑")])),_:1})]),s("div",eo,[s("div",to,[s("div",io,[n(r,null,{default:d(()=>[n(b(G))]),_:1})]),o[7]||(o[7]=s("div",{class:"section-title"},"用卡人详情",-1))]),s("div",ao,[s("div",no,[o[8]||(o[8]=s("div",{class:"info-label"},"国家",-1)),s("div",ro,i(((k=e.value)==null?void 0:k.country)||"-"),1),o[9]||(o[9]=s("div",{class:"info-label"},"生日",-1)),s("div",uo,i(((x=e.value)==null?void 0:x.birthday)||"-"),1)]),s("div",co,[o[10]||(o[10]=s("div",{class:"info-label"},"邮箱",-1)),s("div",vo,i(((h=e.value)==null?void 0:h.email)||"-"),1),o[11]||(o[11]=s("div",{class:"info-label"},"手机号",-1)),s("div",fo,i(((E=e.value)==null?void 0:E.phone)||"-"),1)])]),s("div",_o,[s("div",mo,[n(r,null,{default:d(()=>[n(b(Q))]),_:1})]),o[12]||(o[12]=s("div",{class:"section-title"},"账单地址",-1))]),s("div",bo,[s("div",po,[o[13]||(o[13]=s("div",{class:"info-label"},"国家",-1)),s("div",Co,i(((N=e.value)==null?void 0:N.billCountry)||"-"),1),o[14]||(o[14]=s("div",{class:"info-label"},"省份/州",-1)),s("div",yo,i(((P=e.value)==null?void 0:P.billProvince)||"-"),1)]),s("div",go,[o[15]||(o[15]=s("div",{class:"info-label"},"城市",-1)),s("div",wo,i(((S=e.value)==null?void 0:S.billCity)||"-"),1),o[16]||(o[16]=s("div",{class:"info-label"},"详细地址",-1)),s("div",Do,i(((V=e.value)==null?void 0:V.billAddress)||"-"),1)]),s("div",ko,[o[17]||(o[17]=s("div",{class:"info-label"},"邮政编码",-1)),s("div",xo,i(((B=e.value)==null?void 0:B.billPostcode)||"-"),1),o[18]||(o[18]=s("div",{class:"info-label"},null,-1)),o[19]||(o[19]=s("div",{class:"info-value"},null,-1))])])]),n(l,{modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=$=>u.value=$),width:"800px",top:"40px","close-on-click-modal":!1},{default:d(()=>[n(X,{cardholder:y.value,onClose:o[0]||(o[0]=$=>u.value=!1),onSuccess:K},null,8,["cardholder"])]),_:1},8,["modelValue"])])),[[M,_.value]])}}},Vo=R(ho,[["__scopeId","data-v-91bfa902"]]);export{Vo as default};
