import{_ as D,r as _,a as F,w as G,c as g,b as J,d as r,t as S,e as s,f as t,g as y,h as k,F as L,u as O,o as c,T as U,i as Z,j as C,n as P,E as d,s as j,k as W,l as $,m as R}from"./index-Bqka696Z.js";const H="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'%20?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%3e%3cpath%20d='M8%200C3.58172%200%200%203.58172%200%208L0%2040C0%2044.4183%203.58172%2048%208%2048L40%2048C44.4183%2048%2048%2044.4183%2048%2040L48%208C48%203.58172%2044.4183%200%2040%200L8%200Z'%20fill-rule='nonzero'%20transform='matrix(1%200%200%201%200%200)'%20fill='rgb(255,%20255,%20255)'%20fill-opacity='0.2'/%3e%3cpath%20d='M13.0957%2012.1816Q12.9141%2011.5664%2012.5859%2011.0859Q12.2637%2010.6055%2011.8008%2010.2656Q11.3379%209.92578%2010.7402%209.75Q10.1484%209.57422%209.43359%209.57422Q8.09766%209.57422%207.08398%2010.2363Q6.07617%2010.8984%205.51367%2012.1699Q4.95117%2013.4355%204.95117%2015.252Q4.95117%2017.0801%205.50195%2018.3574Q6.05859%2019.6348%207.07227%2020.3027Q8.08594%2020.9707%209.46875%2020.9707Q10.7227%2020.9707%2011.6133%2020.5254Q12.5039%2020.0801%2012.9727%2019.2598Q13.4473%2018.4395%2013.4473%2017.3262L14.1973%2017.4316L9.70312%2017.4316L9.70312%2014.6602L17.0039%2014.6602L17.0039%2016.8633Q17.0039%2019.1543%2016.0312%2020.8066Q15.0586%2022.459%2013.3535%2023.3496Q11.6543%2024.2402%209.45117%2024.2402Q6.99609%2024.2402%205.13867%2023.1562Q3.28125%2022.0664%202.24414%2020.0625Q1.20703%2018.0527%201.20703%2015.293Q1.20703%2013.166%201.82227%2011.502Q2.44336%209.83789%203.55664%208.67773Q4.67578%207.51758%206.1582%206.91406Q7.64648%206.30469%209.375%206.30469Q10.8574%206.30469%2012.1348%206.73828Q13.418%207.16602%2014.4082%207.95117Q15.4043%208.73633%2016.0312%209.81445Q16.6641%2010.8867%2016.8398%2012.1816L13.0957%2012.1816Z'%20fill-rule='nonzero'%20transform='matrix(1%200%200%201%2014.8672%209)'%20fill='rgb(255,%20255,%20255)'/%3e%3c/svg%3e",K={class:"login-container"},X={class:"login-section"},Y={class:"login-header"},ee={class:"title"},oe={class:"login-card"},se={key:"register"},ae={class:"verification-code-row"},le={key:"login"},re={class:"login-type-switch"},te={class:"form-switch-row"},ie={key:0,class:"form-switch-left"},ne={class:"form-switch-left"},de={class:"form-switch-right"},ue={__name:"index",setup(me){const p=O(),f=_(null),v=_(!1),m=_("phone"),w=_(0),x=_(!1),N=[{value:"你最喜欢的颜色是什么？",label:"你最喜欢的颜色是什么？"},{value:"你的第一只宠物的名字是什么？",label:"你的第一只宠物的名字是什么？"},{value:"你母亲最喜欢的食物是什么？",label:"你母亲最喜欢的食物是什么？"},{value:"你最喜欢的电影是什么？",label:"你最喜欢的电影是什么？"},{value:"你的小学班主任叫什么名字？",label:"你的小学班主任叫什么名字？"}],o=F({loginId:"",password:"",username:"",phone:"",email:"",confirmPassword:"",verificationCode:"",security_question:"",security_answer:"",googleCode:""}),h=_({loginId:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:(n,e,l)=>{e?/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/.test(e)?l():l(new Error("密码必须至少8位，包含字母、数字和特殊字符(@$!%*#?&)")):l(new Error("请输入密码"))},trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(n,e,l)=>{e!==o.password?l(new Error("两次输入的密码不一致")):l()},trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码长度应为6位",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3到20个字符之间",trigger:"blur"}],security_question:[{required:!0,message:"请选择安全问题",trigger:"change"}],security_answer:[{required:!0,message:"请输入安全问题的答案",trigger:"blur"},{min:2,max:20,message:"答案长度在2到20个字符之间",trigger:"blur"}],googleCode:[{required:!0,message:"请输入谷歌验证码",trigger:"blur"},{len:6,message:"验证码长度应为6位",trigger:"blur"}]});G(m,n=>{o.loginId="",o.password="",n==="phone"?h.value.loginId=[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]:h.value.loginId=[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:"blur"}]});const Q=()=>{v.value=!v.value,o.loginId="",o.password="",o.username="",o.phone="",o.email="",o.confirmPassword="",o.verificationCode="",o.security_question="",o.security_answer="",o.googleCode="",x.value=!1},E=async()=>{if(!o.email){d.warning("请输入邮箱");return}try{const n=await j({email:o.email});if(n.code===200){d.success("验证码已发送"),x.value=!0,w.value=60;const e=setInterval(()=>{w.value--,w.value<=0&&clearInterval(e)},1e3)}else d.error(n.msg||"发送失败")}catch(n){console.error("发送验证码失败:",n),d.error("发送验证码失败，请稍后重试")}},M=async(n,e,l)=>{const u=await $({loginId:n,password:e,googleToken:l});if(u.code===200){localStorage.setItem("token",u.data.token),localStorage.setItem("userInfo",JSON.stringify(u.data.user));try{const b=await R();b.code===200?(localStorage.setItem("matrixInfo",JSON.stringify(b.data)),d.success("登录成功"),p.push("/")):p.push("/login/no-matrix")}catch(b){console.error("检查Matrix账号失败:",b),p.push("/login/no-matrix")}}else d.error(u.msg||"登录失败")},I=async()=>{var n,e;if(f.value)try{if(await f.value.validate(),v.value){if(!o.verificationCode){d.warning("请先获取验证码");return}const l=await W({username:o.username,password:o.password,email:o.email,phone:o.phone,security_question:o.security_question,security_answer:o.security_answer,verification_code:o.verificationCode});if(l.code===200){d.success("注册成功，正在登录...");const i=await $({loginId:o.phone,password:o.password});if(i.code===200){localStorage.setItem("token",i.data.token),localStorage.setItem("userInfo",JSON.stringify(i.data.user));try{const u=await R();u.code===200?(localStorage.setItem("matrixInfo",JSON.stringify(u.data)),d.success("登录成功"),p.push("/")):p.push("/login/no-matrix")}catch(u){console.error("检查Matrix账号失败:",u),p.push("/login/no-matrix")}}else d.error(i.msg||"登录失败")}else d.error(l.msg||"注册失败")}else await M(o.loginId,o.password,o.googleCode)}catch(l){console.error("表单提交错误:",l),d.error(((e=(n=l.response)==null?void 0:n.data)==null?void 0:e.msg)||"操作失败，请稍后重试")}},A=()=>{d({message:"请联系系统管理员修改密码，电话：400-888-8888，邮箱：admin@gopay.com",type:"warning",duration:5e3,showClose:!0})},q=n=>{m.value!==n&&(m.value=n,o.loginId="",f.value&&f.value.clearValidate&&f.value.clearValidate(["loginId"]))},T=()=>{window.open("/login/user-agreement","_blank")},z=()=>{window.open("/login/service-agreement","_blank")};return(n,e)=>{const l=y("el-input"),i=y("el-form-item"),u=y("el-option"),b=y("el-select"),V=y("el-button"),B=y("el-form");return c(),g("div",K,[e[20]||(e[20]=J('<div class="brand-section" data-v-a3ae1b31><div class="brand-content" data-v-a3ae1b31><div class="brand-logo-row" data-v-a3ae1b31><img src="'+H+'" alt="GoPay" class="logo-img" data-v-a3ae1b31><h1 class="logo-text" data-v-a3ae1b31>GoPay</h1></div><h2 class="slogan" data-v-a3ae1b31>连接全球数字经济</h2><h3 class="sub-title" data-v-a3ae1b31>全球支付服务解决方案</h3><p class="description" data-v-a3ae1b31>为您提供一站式的支付服务解决方案，帮助您在世界范围内拓展业务以及更好的开拓新市场。</p></div><div class="copyright" data-v-a3ae1b31> © Copyright 2024 GoPay. All rights reserved. </div><div class="brand-bg-decor" data-v-a3ae1b31></div></div>',1)),r("div",X,[r("div",Y,[r("h2",ee,S(v.value?"注册":"登录"),1),e[13]||(e[13]=r("p",{class:"welcome"},"Welcome to GoPay",-1))]),r("div",oe,[s(B,{ref_key:"formRef",ref:f,model:o,rules:h.value},{default:t(()=>[s(U,{name:"form-fade-slide",mode:"out-in"},{default:t(()=>[v.value?(c(),g("div",se,[s(i,{prop:"username","inline-message":""},{default:t(()=>[s(l,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=a=>o.username=a),placeholder:"用户名"},null,8,["modelValue"])]),_:1}),s(i,{prop:"email","inline-message":""},{default:t(()=>[s(l,{modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=a=>o.email=a),placeholder:"邮箱"},null,8,["modelValue"])]),_:1}),s(i,{prop:"phone","inline-message":""},{default:t(()=>[s(l,{modelValue:o.phone,"onUpdate:modelValue":e[2]||(e[2]=a=>o.phone=a),placeholder:"手机号"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password","inline-message":""},{default:t(()=>[s(l,{modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=a=>o.password=a),type:"password",placeholder:"密码","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"confirmPassword","inline-message":""},{default:t(()=>[s(l,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=a=>o.confirmPassword=a),type:"password",placeholder:"确认密码","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"security_question","inline-message":""},{default:t(()=>[s(b,{modelValue:o.security_question,"onUpdate:modelValue":e[5]||(e[5]=a=>o.security_question=a),placeholder:"选择安全问题",style:{width:"100%"}},{default:t(()=>[(c(),g(L,null,Z(N,a=>s(u,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),s(i,{prop:"security_answer","inline-message":""},{default:t(()=>[s(l,{modelValue:o.security_answer,"onUpdate:modelValue":e[6]||(e[6]=a=>o.security_answer=a),placeholder:"安全问题答案"},null,8,["modelValue"])]),_:1}),s(i,{prop:"verificationCode","inline-message":""},{default:t(()=>[r("div",ae,[s(l,{modelValue:o.verificationCode,"onUpdate:modelValue":e[7]||(e[7]=a=>o.verificationCode=a),placeholder:"请输入6位邮箱验证码"},null,8,["modelValue"]),s(V,{type:"primary",class:"get-code-btn",disabled:w.value>0||!o.email,onClick:E},{default:t(()=>[C(S(w.value>0?`${w.value}s`:"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1}),s(i,null,{default:t(()=>[s(V,{class:"submit-button",onClick:I},{default:t(()=>e[14]||(e[14]=[C("注册")])),_:1})]),_:1})])):(c(),g("div",le,[r("div",re,[r("span",{class:P({active:m.value==="phone"}),onClick:e[8]||(e[8]=a=>q("phone"))},"手机",2),e[15]||(e[15]=r("span",{class:"divider"},"|",-1)),r("span",{class:P({active:m.value==="email"}),onClick:e[9]||(e[9]=a=>q("email"))},"邮箱",2)]),s(U,{name:"form-fade-slide",mode:"out-in"},{default:t(()=>[(c(),g("div",{key:m.value},[s(i,{prop:"loginId","inline-message":""},{default:t(()=>[s(l,{modelValue:o.loginId,"onUpdate:modelValue":e[10]||(e[10]=a=>o.loginId=a),placeholder:m.value==="phone"?"请输入手机号":"请输入邮箱",class:"input-with-select"},null,8,["modelValue","placeholder"])]),_:1}),s(i,{prop:"password","inline-message":""},{default:t(()=>[s(l,{modelValue:o.password,"onUpdate:modelValue":e[11]||(e[11]=a=>o.password=a),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),s(i,{prop:"googleCode","inline-message":""},{default:t(()=>[s(l,{modelValue:o.googleCode,"onUpdate:modelValue":e[12]||(e[12]=a=>o.googleCode=a),placeholder:"请输入6位验证码"},null,8,["modelValue"])]),_:1})]))]),_:1}),s(i,null,{default:t(()=>[s(V,{class:"submit-button",onClick:I},{default:t(()=>e[16]||(e[16]=[C("登录")])),_:1})]),_:1})]))]),_:1})]),_:1},8,["model","rules"]),r("div",te,[v.value?(c(),g("div",ie,[e[17]||(e[17]=r("span",{class:"form-link form-link-gray"},"已有账号？",-1)),r("a",{class:"form-link form-link-main",href:"#",onClick:k(Q,["prevent"])},"登录")])):(c(),g(L,{key:1},[r("div",ne,[r("a",{class:"form-link",href:"#",onClick:k(A,["prevent"])},"忘记密码?")]),r("div",de,[r("a",{class:"form-link",href:"#",onClick:k(Q,["prevent"])},"注册账号")])],64))])]),r("div",{class:"login-footer"},[e[19]||(e[19]=r("div",{class:"form-divider"},null,-1)),r("div",{class:"footer-links"},[r("a",{class:"footer-link",href:"javascript:;",onClick:T},"用户协议"),r("a",{class:"footer-link",href:"javascript:;",onClick:z},"服务协议"),e[18]||(e[18]=r("a",{class:"footer-link",href:"https://www.baidu.com/",target:"_blank",rel:"noopener"},"帮助中心",-1))])])])])}}},ce=D(ue,[["__scopeId","data-v-a3ae1b31"]]);export{ce as default};
