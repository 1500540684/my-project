import{_ as F,r as V,p as R,J as S,I as L,c as h,d as e,e as f,f as m,g as A,x as T,j as g,t as c,F as k,i as C,u as M,o as v,y as b,V as z,P,Z as j,aC as E}from"./index-Bqka696Z.js";import{g as H}from"./transaction-DUqCAnlx.js";const J={class:"trade-detail-wrapper"},Z={class:"header-bar"},q={class:"amount-section"},G={class:"amount-row"},K={class:"amount"},O={class:"currency"},Q={class:"detail-content"},U={class:"info-section"},W={class:"section-icon"},X={class:"info-table"},Y={class:"info-label"},$={class:"info-value"},ee={class:"info-label"},te={class:"info-value"},ae={class:"info-section"},le={class:"section-icon"},se={class:"info-table"},oe={class:"info-label"},ne={class:"info-value"},ie={class:"info-label"},ue={class:"info-value"},ce={class:"info-section"},re={class:"section-icon"},de={class:"info-table"},fe={class:"info-row"},ve={class:"info-value"},_e={__name:"Detail",setup(me){const x=S(),D=M(),a=V(null),p=V(!1);async function I(i){var l,o,u;p.value=!0;try{const s=await H({transactionId:i});if(s.code===200&&Array.isArray((l=s.data)==null?void 0:l.data)&&s.data.data.length>0){const t=s.data.data[0];a.value={amount:t.transactionAmount,currency:t.transactionCurrency,status:t.status==="succeed"?"成功":"失败",createTime:((o=t.createdAt)==null?void 0:o.replace("T"," "))||"-",finishTime:((u=t.createdAt)==null?void 0:u.replace("T"," "))||"-",serial:t.transactionId,cardNumber:t.maskCardNo,cardType:t.cardType,tradeType:t.transactionType,settleStatus:t.settleStatus,xid:t.cardId,org:t.cardFormFactor,tradeAmount:t.transactionCurrency+" "+t.transactionAmount,fee:t.feeDeductionCurrency+" "+(t.feeDeductionAmount??""),arrive:t.transactionCurrency+" "+(t.arrivalAmount??""),feeMode:t.feeDeductionAccount,fromAccount:t.txnPrincipalChangeAccount,feeAccount:t.feeDeductionAccount,toAccount:t.arrivalAccount,merchant:t.merchantNameLocation||"--"}}else a.value=null}catch{a.value=null}finally{p.value=!1}}R(async()=>{const i=x.params.id;i&&await I(i)});function N(){D.back()}const w=L(()=>{var i,l,o,u,s,t,r,d,n,_,y;return[{leftLabel:"创建日期",leftValue:((i=a.value)==null?void 0:i.createTime)||"-",rightLabel:"交易完成时间",rightValue:((l=a.value)==null?void 0:l.finishTime)||"-"},{leftLabel:"交易日期",leftValue:((o=a.value)==null?void 0:o.createTime)||"-",rightLabel:"交易流水号",rightValue:((u=a.value)==null?void 0:u.serial)||"-"},{leftLabel:"原始交易编号",leftValue:"--",rightLabel:"卡号",rightValue:((s=a.value)==null?void 0:s.cardNumber)||"-"},{leftLabel:"卡ID",leftValue:((t=a.value)==null?void 0:t.xid)||"-",rightLabel:"卡类型",rightValue:((r=a.value)==null?void 0:r.cardType)||"-"},{leftLabel:"卡组织",leftValue:((d=a.value)==null?void 0:d.org)||"-",rightLabel:"交易类型",rightValue:((n=a.value)==null?void 0:n.tradeType)||"-"},{leftLabel:"交易金额",leftValue:((_=a.value)==null?void 0:_.tradeAmount)||"-",rightLabel:"结算状态",rightValue:((y=a.value)==null?void 0:y.settleStatus)||"-"}]}),B=L(()=>{var i,l,o,u,s,t,r,d;return[{leftLabel:"交易本金变动账户",leftValue:((i=a.value)==null?void 0:i.fromAccount)||"-",rightLabel:"交易本金承授权金额",rightValue:(l=a.value)!=null&&l.tradeAmount?"-"+a.value.tradeAmount:"-"},{leftLabel:"手续费扣费账户",leftValue:((o=a.value)==null?void 0:o.feeAccount)||"-",rightLabel:"手续费扣费金额",rightValue:(u=a.value)!=null&&u.fee?"-"+a.value.fee:"-"},{leftLabel:"到账账户",leftValue:((s=a.value)==null?void 0:s.toAccount)||"-",rightLabel:"到账金额",rightValue:((t=a.value)==null?void 0:t.arrive)||"-"},{leftLabel:"手续费扣费模式",leftValue:((r=a.value)==null?void 0:r.feeMode)||"-",rightLabel:"交易手续费",rightValue:(d=a.value)!=null&&d.fee?"-"+a.value.fee:"-"}]});return(i,l)=>{var s,t,r,d;const o=A("el-icon"),u=A("el-tag");return v(),h("div",J,[e("div",Z,[f(o,{class:"back-icon-only",onClick:N},{default:m(()=>[f(b(z))]),_:1}),l[0]||(l[0]=e("span",{class:"header-title"},"交易详情",-1))]),e("div",q,[l[3]||(l[3]=e("div",{class:"amount-label"},"交易金额",-1)),e("div",G,[e("span",K,[g(c((s=a.value)==null?void 0:s.amount)+" ",1),e("span",O,c((t=a.value)==null?void 0:t.currency),1)]),((r=a.value)==null?void 0:r.status)==="成功"?(v(),T(u,{key:0,type:"success",size:"small"},{default:m(()=>l[1]||(l[1]=[g("成功")])),_:1})):(v(),T(u,{key:1,type:"danger",size:"small"},{default:m(()=>l[2]||(l[2]=[g("失败")])),_:1}))])]),e("div",Q,[e("div",U,[e("div",W,[f(o,null,{default:m(()=>[f(b(P))]),_:1})]),l[4]||(l[4]=e("div",{class:"section-title"},"交易信息",-1))]),e("div",X,[(v(!0),h(k,null,C(w.value,(n,_)=>(v(),h("div",{class:"info-row",key:"trade-"+_},[e("div",Y,c(n.leftLabel),1),e("div",$,c(n.leftValue),1),e("div",ee,c(n.rightLabel),1),e("div",te,c(n.rightValue),1)]))),128))]),e("div",ae,[e("div",le,[f(o,null,{default:m(()=>[f(b(j))]),_:1})]),l[5]||(l[5]=e("div",{class:"section-title"},"资金信息",-1))]),e("div",se,[(v(!0),h(k,null,C(B.value,(n,_)=>(v(),h("div",{class:"info-row",key:"fund-"+_},[e("div",oe,c(n.leftLabel),1),e("div",ne,c(n.leftValue),1),e("div",ie,c(n.rightLabel),1),e("div",ue,c(n.rightValue),1)]))),128))]),e("div",ce,[e("div",re,[f(o,null,{default:m(()=>[f(b(E))]),_:1})]),l[6]||(l[6]=e("div",{class:"section-title"},"其他",-1))]),e("div",de,[e("div",fe,[l[7]||(l[7]=e("div",{class:"info-label"},"商户名称",-1)),e("div",ve,c((d=a.value)==null?void 0:d.merchant),1),l[8]||(l[8]=e("div",{class:"info-label"},null,-1)),l[9]||(l[9]=e("div",{class:"info-value"},null,-1))])])])])}}},ge=F(_e,[["__scopeId","data-v-5610d7b9"]]);export{ge as default};
