import{_ as k,r as N,w as A,C as D,D as B,c as E,d as s,e,f as t,g as n,j as v,o as S,y as Y,ax as $,E as b}from"./index-Bqka696Z.js";import{u as I}from"./cardholder-BMYgKJ4n.js";const M={class:"create-cardholder-dialog-outer","element-loading-text":"正在提交..."},O={class:"main-title-row"},j={class:"section-block"},H={class:"form-card"},K={class:"section-block"},q={class:"form-card"},T={class:"footer-btns"},z={__name:"EditCardholder",props:{cardholder:{type:Object,required:!0,default:()=>({})}},emits:["close","success"],setup(P,{emit:h}){const c=P,a=N({country:"",firstName:"",lastName:"",birthday:"",email:"",phonePrefix:"",phone:"",billCountry:"",billProvince:"",billCity:"",billAddress:"",billPostcode:""}),p=N(!1),_=h;A(()=>c.cardholder,d=>{d&&(a.value={country:d.nationalityCountryCode||"",firstName:d.firstName||"",lastName:d.lastName||"",birthday:d.dateOfBirth||"",email:d.email||"",phonePrefix:d.mobilePrefix||"",phone:d.mobile||"",billCountry:d.residentialCountryCode||"",billProvince:d.residentialState||"",billCity:d.residentialCity||"",billAddress:d.residentialAddress||"",billPostcode:d.residentialPostalCode||""})},{immediate:!0,deep:!0});async function w(){try{p.value=!0;const d={cardholderId:c.cardholder.cardholderId,firstName:a.value.firstName,lastName:a.value.lastName,dateOfBirth:a.value.birthday,email:a.value.email,mobile:a.value.phone,mobilePrefix:a.value.phonePrefix,nationalityCountryCode:a.value.country,residentialAddress:a.value.billAddress,residentialCity:a.value.billCity,residentialCountryCode:a.value.billCountry,residentialPostalCode:a.value.billPostcode,residentialState:a.value.billProvince},l=await I(d);l.code===200&&l.data.code==="200"?(b.success("更新成功"),_("close"),_("success")):b.error(l.data.msg||"更新失败")}catch(d){console.error("更新用卡人信息失败:",d),b.error("更新失败")}finally{p.value=!1}}return(d,l)=>{const U=n("el-icon"),r=n("el-option"),f=n("el-select"),i=n("el-form-item"),u=n("el-col"),m=n("el-input"),x=n("el-date-picker"),y=n("el-row"),V=n("el-form"),C=n("el-button"),g=B("loading");return D((S(),E("div",M,[s("div",O,[l[14]||(l[14]=s("span",{class:"main-title"},"编辑用卡人",-1)),e(U,{class:"close-btn",onClick:l[0]||(l[0]=o=>d.$emit("close"))},{default:t(()=>[e(Y($))]),_:1})]),s("div",j,[l[15]||(l[15]=s("div",{class:"section-title"},"用卡人信息",-1)),l[16]||(l[16]=s("div",{class:"section-desc"},"设置您的用卡人信息",-1)),s("div",H,[e(V,{model:a.value,"label-width":"0",class:"user-form",disabled:p.value},{default:t(()=>[e(y,{gutter:16},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(i,null,{default:t(()=>[e(f,{modelValue:a.value.country,"onUpdate:modelValue":l[1]||(l[1]=o=>a.value.country=o),placeholder:"国家",style:{width:"100%"}},{default:t(()=>[e(r,{label:"中国",value:"CN"}),e(r,{label:"香港",value:"HK"}),e(r,{label:"美国",value:"US"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.firstName,"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.firstName=o),placeholder:"名"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.lastName,"onUpdate:modelValue":l[3]||(l[3]=o=>a.value.lastName=o),placeholder:"姓"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(i,null,{default:t(()=>[e(x,{modelValue:a.value.birthday,"onUpdate:modelValue":l[4]||(l[4]=o=>a.value.birthday=o),type:"date",placeholder:"生日",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.email,"onUpdate:modelValue":l[5]||(l[5]=o=>a.value.email=o),placeholder:"电子邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(i,{class:"phone-item"},{default:t(()=>[e(m,{modelValue:a.value.phone,"onUpdate:modelValue":l[7]||(l[7]=o=>a.value.phone=o),placeholder:"手机号"},{prepend:t(()=>[e(f,{modelValue:a.value.phonePrefix,"onUpdate:modelValue":l[6]||(l[6]=o=>a.value.phonePrefix=o),style:{width:"70px"}},{default:t(()=>[e(r,{label:"+86",value:"86"}),e(r,{label:"+1",value:"1"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])])]),s("div",K,[l[17]||(l[17]=s("div",{class:"section-title"},"账单地址",-1)),l[18]||(l[18]=s("div",{class:"section-desc"},[v("为不影响下订单和正常使用，用卡人的账单地址建议填写成实际收货或为中国地址。"),s("br"),s("span",{class:"tip"},"Discover Card：所有卡均限")],-1)),s("div",q,[e(V,{model:a.value,"label-width":"0",class:"address-form",disabled:p.value},{default:t(()=>[e(y,{gutter:16},{default:t(()=>[e(u,{span:24},{default:t(()=>[e(i,null,{default:t(()=>[e(f,{modelValue:a.value.billCountry,"onUpdate:modelValue":l[8]||(l[8]=o=>a.value.billCountry=o),placeholder:"国家",style:{width:"100%"}},{default:t(()=>[e(r,{label:"中国",value:"CN"}),e(r,{label:"香港",value:"HK"}),e(r,{label:"美国",value:"US"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.billProvince,"onUpdate:modelValue":l[9]||(l[9]=o=>a.value.billProvince=o),placeholder:"省份/州"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.billCity,"onUpdate:modelValue":l[10]||(l[10]=o=>a.value.billCity=o),placeholder:"城市"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.billAddress,"onUpdate:modelValue":l[11]||(l[11]=o=>a.value.billAddress=o),placeholder:"详细地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(i,null,{default:t(()=>[e(m,{modelValue:a.value.billPostcode,"onUpdate:modelValue":l[12]||(l[12]=o=>a.value.billPostcode=o),placeholder:"邮编"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","disabled"])])]),s("div",T,[e(C,{class:"back-btn",onClick:l[13]||(l[13]=o=>d.$emit("close")),disabled:p.value},{default:t(()=>l[19]||(l[19]=[v("返回")])),_:1},8,["disabled"]),e(C,{type:"primary",class:"submit-btn",onClick:w,loading:p.value},{default:t(()=>l[20]||(l[20]=[v("提交")])),_:1},8,["loading"])])])),[[g,p.value]])}}},J=k(z,[["__scopeId","data-v-283b2d25"]]);export{J as default};
